<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة التحكم - ShopExpress</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .product-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>لوحة تحكم المتجر</h1>
        
        <div id="product-forms">
            <!-- Les produits seront chargés ici -->
        </div>
        
        <button onclick="addProduct()">+ إضافة منتج جديد</button>
        <button onclick="saveChanges()">💾 حفظ التغييرات</button>
    </div>

    <script>
        // Charger les données depuis GitHub
        async function loadData() {
            const response = await fetch('https://raw.githubusercontent.com/VOTRE_USERNAME/admin-boutique/main/config.json');
            return await response.json();
        }

        // Ajouter un formulaire produit
        function addProduct(product = {id: Date.now().toString()}) {
            const form = document.createElement('div');
            form.className = 'product-form';
            form.innerHTML = `
                <h3>${product.title || 'منتج جديد'}</h3>
                <input type="text" placeholder="اسم المنتج" value="${product.title || ''}" data-field="title">
                <textarea placeholder="وصف المنتج" data-field="description">${product.description || ''}</textarea>
                <input type="number" placeholder="السعر الحالي" value="${product.currentPrice || ''}" data-field="currentPrice">
                <input type="number" placeholder="السعر القديم" value="${product.oldPrice || ''}" data-field="oldPrice">
                <input type="text" placeholder="نسبة الخصم" value="${product.discount || ''}" data-field="discount">
                <button onclick="this.parentElement.remove()">حذف المنتج</button>
            `;
            document.getElementById('product-forms').appendChild(form);
        }

        // Sauvegarder les modifications
        async function saveChanges() {
            const forms = document.querySelectorAll('.product-form');
            const products = {};
            
            forms.forEach(form => {
                const id = 'product-' + Math.random().toString(36).substr(2, 9);
                products[id] = {
                    title: form.querySelector('[data-field="title"]').value,
                    description: form.querySelector('[data-field="description"]').value,
                    currentPrice: parseInt(form.querySelector('[data-field="currentPrice"]').value),
                    oldPrice: parseInt(form.querySelector('[data-field="oldPrice"]').value),
                    discount: form.querySelector('[data-field="discount"]').value
                };
            });

            // Ici vous devrez implémenter l'envoi vers GitHub
            alert('سيتم حفظ التغييرات على GitHub');
            console.log(JSON.stringify(products, null, 2));
        }

        // Initialisation
        async function init() {
            const data = await loadData();
            Object.values(data.products).forEach(product => {
                addProduct(product);
            });
        }

        init();
    </script>
</body>
</html>
